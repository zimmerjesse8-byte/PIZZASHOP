<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volcano Pizza | Engineering The Perfect Slice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700;900&family=Poppins:wght@400;600&family=Source+Code+Pro:wght@600&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body, html { cursor: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3e%3cpath d='M 16 2 L 2 28 L 30 28 Z' fill='%23FFD700' /%3e%3cpath d='M 2 28 L 30 28' stroke='%23D2691E' stroke-width='6' stroke-linecap='round' /%3e%3ccircle cx='16' cy='12' r='3' fill='%23C0392b' /%3e%3ccircle cx='10' cy='20' r='3' fill='%23C0392b' /%3e%3ccircle cx='22' cy='20' r='3' fill='%23C0392b' /%3e%3c/svg%3e") 16 2, auto; }
        body { font-family: 'Poppins', sans-serif; background-color: #110E0B; color: #EAE0D5; }
        h1, h2, .tech-font { font-family: 'Exo 2', sans-serif; letter-spacing: 1.5px; }
        h3, h4 { font-family: 'Poppins', sans-serif; font-weight: 700; }
        .ticker-font { font-family: 'Source Code Pro', monospace; }
        .hero-bg { position: relative; height: 85vh; display: flex; align-items: center; justify-content: center; background-image: linear-gradient(rgba(17, 14, 11, 0.85), rgba(17, 14, 11, 0.85)), url('./images/pizza-closeup.jpg'); background-size: cover; background-position: center; }
        .btn-primary { background-color: transparent; border: 2px solid #FF4500; color: #FF4500; transition: all 0.3s ease; }
        .btn-primary:hover, .btn-primary:focus { background-color: #FF4500; color: #110E0B; transform: translateY(-3px); box-shadow: 0 4px 15px rgba(255, 69, 0, 0.4); }
        .btn-primary[disabled] { background-color: #4D3D2B; border-color: #4D3D2B; color: #9ca3af; cursor: not-allowed; transform: none; box-shadow: none; }
        .card { background-color: rgba(30, 25, 20, 0.7); backdrop-filter: blur(12px); border-radius: 0.75rem; border: 1px solid #4D3D2B; transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease; overflow: hidden; position: relative; }
        .card:hover { transform: translateY(-8px); border-color: #FF4500; box-shadow: 0 8px 30px rgba(255, 69, 0, 0.3); }
        .section-title { text-shadow: 0 0 10px rgba(255, 69, 0, 0.5); line-height: 1.3; }
        .reveal { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease-out, transform 0.6s ease-out; }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .secret-button { position: absolute; top: 5px; right: 5px; width: 12px; height: 12px; background-color: rgba(255, 69, 0, 0.05); border-radius: 50%; cursor: default; transition: all 0.2s ease; z-index: 100; opacity: 0.1; }
        .secret-button:hover { background-color: rgba(255, 69, 0, 0.4); transform: scale(1.4); opacity: 0.6; cursor: pointer; }
        .hint-popup { position: fixed; right: -350px; top: 50%; transform: translateY(-50%); width: 320px; background: linear-gradient(135deg, #2D1810 0%, #1A1510 100%); padding: 20px 25px; border-radius: 15px 0 0 15px; border: 2px solid #FF4500; border-right: none; box-shadow: -5px 0 20px rgba(255, 69, 0, 0.3); z-index: 9998; transition: right 0.3s ease; }
        .hint-popup.show { right: 0; }
        .hint-popup::before { content: 'üîç'; position: absolute; left: -40px; top: 50%; transform: translateY(-50%); font-size: 3rem; animation: wiggle 2s ease-in-out infinite; }
        @keyframes wiggle { 0%, 100% { transform: translateY(-50%) rotate(-5deg); } 50% { transform: translateY(-50%) rotate(5deg); } }
        .hint-close { position: absolute; top: 5px; right: 5px; background: transparent; border: none; color: #FF4500; font-size: 1.5rem; cursor: pointer; line-height: 1; padding: 5px; }
        .hint-close:hover { color: #FF6B00; }
        .game-popup { position: fixed; left: -380px; top: 50%; transform: translateY(-50%); width: 360px; background: linear-gradient(135deg, #1A1510 0%, #2D1810 100%); padding: 20px 25px; border-radius: 0 15px 15px 0; border: 2px solid #FF4500; border-left: none; box-shadow: 5px 0 20px rgba(255, 69, 0, 0.3); z-index: 9999; transition: left 0.3s ease-in-out; }
        .game-popup.show { left: 0; }
        .game-popup::before { content: 'üçï'; position: absolute; right: -40px; top: 50%; transform: translateY(-50%); font-size: 3rem; animation: wiggle 2.5s ease-in-out infinite reverse; opacity: 0; transition: opacity 0.3s 0.2s ease; }
        .game-popup.show::before { opacity: 1; }
        .game-close { position: absolute; top: 5px; right: 5px; background: transparent; border: none; color: #FF4500; font-size: 1.5rem; cursor: pointer; line-height: 1; padding: 5px; }
        .game-close:hover { color: #FF6B00; }
        #game-message { min-height: 20px; font-size: 0.8rem; }
        #game-area { position: relative; overflow: hidden; touch-action: none; background-color: #261a14; height: 220px; border: 1px solid #4D3D2B; }
        #game-info { display: flex; justify-content: space-between; padding: 0 10px; font-family: 'Source Code Pro', monospace; font-size: 0.9rem; margin-bottom: 5px; }
        #game-over-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.8); display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; z-index: 100; cursor: default; }
        #game-over-overlay.show { display: flex; }
        #game-over-message { font-size: 2.2rem; font-family: 'Exo 2', sans-serif; color: #FF4500; margin-bottom: 5px; }
        #game-area.game-inactive #target, #game-area.game-inactive #pizza-projectile-wrapper, #game-area.game-inactive #slingshot-base, #game-area.game-inactive .obstacle { opacity: 0; transition: opacity 0.3s ease; pointer-events: none; }
        #game-area.game-inactive .obstacle, #game-area.game-inactive #target { animation-play-state: paused; }
        #target { position: absolute; left: 15px; width: 20px; height: 20px; background-color: #ef4444; border: 2px solid #f87171; border-radius: 50%; z-index: 10; animation: moveTargetVertical 2s ease-in-out infinite alternate; transition: background-color 0.1s ease, opacity 0.3s ease; }
        .hit-flash { background-color: #4ade80 !important; }
        @keyframes moveTargetVertical { from { top: 10px; } to { top: 188px; } }
        .obstacle { position: absolute; background-color: #795548; border: 2px solid #5D4037; border-radius: 4px; z-index: 15; transition: opacity 0.3s ease; display: none; width: 15px; }
        .obstacle.with-gap { background: linear-gradient(to bottom, #795548 0%, #795548 45%, transparent 45%, transparent 55%, #795548 55%, #795548 100%); }
        #obstacle-wall-1 { left: 180px; height: 100px; animation: moveObstacleVertical-1 3s ease-in-out infinite alternate; }
        #obstacle-wall-2 { left: 140px; height: 120px; animation: moveObstacleVertical-2 2.5s ease-in-out infinite alternate; }
        #obstacle-wall-3 { left: 100px; height: 90px; animation: moveObstacleVertical-3 2.8s ease-in-out infinite alternate; }
        #obstacle-wall-4 { left: 60px; height: 110px; animation: moveObstacleVertical-4 3.2s ease-in-out infinite alternate; }
        #obstacle-wall-5 { left: 20px; height: 130px; animation: moveObstacleVertical-5 2.6s ease-in-out infinite alternate; }
        @keyframes moveObstacleVertical-1 { from { top: -20px; } to { top: 140px; } }
        @keyframes moveObstacleVertical-2 { from { top: 150px; } to { top: -30px; } }
        @keyframes moveObstacleVertical-3 { from { top: 0px; } to { top: 130px; } }
        @keyframes moveObstacleVertical-4 { from { top: 120px; } to { top: -10px; } }
        @keyframes moveObstacleVertical-5 { from { top: 50px; } to { top: 100px; } }
        #pizza-projectile-wrapper { position: absolute; width: 30px; height: 30px; z-index: 50; will-change: transform; user-select: none; cursor: grab; transition: box-shadow 0.1s ease, opacity 0.3s ease; }
        #pizza-projectile { position: absolute; font-size: 2rem; width: 30px; height: 30px; text-align: center; line-height: 30px; pointer-events: none; user-select: none; transition: transform 0.1s ease; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
        #pizza-projectile-wrapper.dragging { cursor: grabbing; }
        #pizza-projectile-wrapper.max-pull { box-shadow: 0 0 15px 5px rgba(255, 100, 50, 0.8); border-radius: 50%; }
        
        #slingshot-base { position: absolute; right: 50px; width: 0; height: 0; z-index: 20; border-left: 20px solid transparent; border-right: 20px solid transparent; border-bottom: 45px solid #8B4513; transition: transform 0.2s ease-out; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
        #slingshot-base::before { content: ''; position: absolute; left: 50%; bottom: 5px; transform: translateX(-50%); width: 8px; height: 8px; background: radial-gradient(circle, #FF4500, #FF6347); border-radius: 50%; box-shadow: 0 0 10px #FF4500; animation: lavaGlow 1.5s ease-in-out infinite; }
        @keyframes lavaGlow { 0%, 100% { opacity: 0.8; transform: translateX(-50%) scale(1); } 50% { opacity: 1; transform: translateX(-50%) scale(1.2); } }
        #slingshot-base::after { content: ''; display: none; }
        #slingshot-base.bottom { bottom: 5px; transform-origin: center bottom; }
        #slingshot-base.top { top: 5px; transform-origin: center top; transform: rotate(180deg); }
        
        .slingshot-band { position: absolute; height: 5px; background: linear-gradient(to right, #FF6347 0%, #FF4500 50%, #FF6347 100%); z-index: 40; display: none; pointer-events: none; border-radius: 2.5px; box-shadow: 0 2px 5px rgba(0,0,0,0.4), 0 0 12px rgba(255,69,0,0.6); transform-origin: 0 50%; opacity: 0.9; }
        
        #countdown-timer { position: absolute; top: 10px; right: 10px; font-family: 'Source Code Pro', monospace; font-size: 1.8rem; color: #FF4500; text-shadow: 0 0 5px black; z-index: 60; display: none; }
        .reopen-tab { position: fixed; top: 50%; transform: translateY(-50%); width: 40px; height: 60px; background: linear-gradient(135deg, #2D1810 0%, #1A1510 100%); border: 2px solid #FF4500; z-index: 9997; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; transition: all 0.3s ease; box-shadow: 0 0 15px rgba(255, 69, 0, 0.3); }
        .reopen-tab.hidden { display: none; }
        .left-tab { left: 0; border-left: none; border-radius: 0 10px 10px 0; }
        .left-tab:hover { transform: translateY(-50%) translateX(5px); }
        .right-tab { right: 0; border-right: none; border-radius: 10px 0 0 10px; }
        .right-tab:hover { transform: translateY(-50%) translateX(-5px); }
        .story-flip-container { perspective: 1000px; }
        .story-flip-inner { position: relative; width: 100%; transition: transform 0.8s; transform-style: preserve-3d; }
        .story-flip-container.flipped .story-flip-inner { transform: rotateY(180deg); }
        .story-flip-front, .story-flip-back { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
        .story-flip-back { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform: rotateY(180deg); background: linear-gradient(135deg, #1A1510 0%, #2D1810 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; border-left: 4px solid #FF4500; border-radius: 0.375rem; box-shadow: 0 0 40px rgba(255, 69, 0, 0.4); }
        .falling-food-bg { position: relative; overflow: hidden; background-color: #0A0704; }
        .falling-item { position: absolute; top: -100px; width: 40px; height: 40px; opacity: 0.15; animation: fall linear infinite; pointer-events: none; user-select: none; }
        .falling-item img { width: 100%; height: 100%; object-fit: contain; filter: brightness(0.8) contrast(1.2); }
        @keyframes fall { from { top: -100px; transform: rotate(0deg); } to { top: 100vh; transform: rotate(360deg); } }
        .social-float { position: fixed; left: 20px; bottom: 20px; z-index: 1000; display: flex; flex-direction: row; gap: 15px; }
        .social-btn { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #2D1810 0%, #1A1510 100%); border: 2px solid #FF4500; color: #FF4500; font-size: 1.5rem; text-decoration: none; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 69, 0, 0.3); }
        .social-btn:hover { background: #FF4500; color: #110E0B; transform: scale(1.1) translateY(-5px); box-shadow: 0 6px 20px rgba(255, 69, 0, 0.5); }
        @media (max-width: 768px) { .social-float { left: 10px; bottom: 10px; } .social-btn { width: 45px; height: 45px; font-size: 1.3rem; } }
        
        .snake-game-btn { position: fixed; bottom: 20px; right: 20px; z-index: 1000; background: linear-gradient(135deg, #FF4500 0%, #FF6347 100%); border: 3px solid #FFD700; color: white; font-family: 'Exo 2', sans-serif; font-weight: 700; padding: 15px 25px; border-radius: 50px; cursor: pointer; box-shadow: 0 4px 20px rgba(255, 69, 0, 0.5); transition: all 0.3s ease; font-size: 0.9rem; text-align: center; animation: pulse 2s ease-in-out infinite; }
        .snake-game-btn:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 6px 25px rgba(255, 69, 0, 0.7); }
        @keyframes pulse { 0%, 100% { box-shadow: 0 4px 20px rgba(255, 69, 0, 0.5); } 50% { box-shadow: 0 4px 30px rgba(255, 69, 0, 0.8); } }
        @media (max-width: 768px) { .snake-game-btn { bottom: 10px; right: 10px; padding: 12px 20px; font-size: 0.8rem; } }
        
        .snake-popup { position: fixed; left: -420px; top: 50%; transform: translateY(-50%); width: 400px; background: linear-gradient(135deg, #1A1510 0%, #2D1810 100%); padding: 20px; border-radius: 0 15px 15px 0; border: 2px solid #FF4500; border-left: none; box-shadow: 5px 0 20px rgba(255, 69, 0, 0.3); z-index: 9997; transition: left 0.3s ease-in-out; max-height: 95vh; overflow-y: auto; }
        .snake-popup.show { left: 0; }
        .snake-close { position: absolute; top: 5px; right: 5px; background: transparent; border: none; color: #FF4500; font-size: 1.5rem; cursor: pointer; line-height: 1; padding: 5px; z-index: 10; }
        .snake-close:hover { color: #FF6B00; }
        #snake-canvas { background: linear-gradient(135deg, #2D1810 0%, #1A1510 100%); border: 3px solid #FF4500; border-radius: 8px; display: block; margin: 10px auto; box-shadow: 0 0 20px rgba(255, 69, 0, 0.3); touch-action: none; }
        .snake-controls { display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 10px; }
        .snake-control-btn { width: 50px; height: 50px; background: linear-gradient(135deg, #FF4500, #FF6347); border: 2px solid #FFD700; border-radius: 10px; color: white; font-size: 1.5rem; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; user-select: none; }
        .snake-control-btn:active { transform: scale(0.95); background: linear-gradient(135deg, #FF6347, #FF4500); }
        .snake-control-grid { display: grid; grid-template-columns: repeat(3, 50px); grid-template-rows: repeat(3, 50px); gap: 5px; }
        @media (max-width: 768px) { .snake-popup { width: 95vw; left: -100vw; max-height: 90vh; } .snake-popup.show { left: 0; } #snake-canvas { width: 100%; height: auto; max-width: 360px; } }
        .reopen-snake-tab { position: fixed; bottom: 50%; transform: translateY(50%); left: 0; width: 40px; height: 60px; background: linear-gradient(135deg, #2D1810 0%, #1A1510 100%); border: 2px solid #FF4500; border-left: none; border-radius: 0 10px 10px 0; z-index: 9996; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; transition: all 0.3s ease; box-shadow: 0 0 15px rgba(255, 69, 0, 0.3); }
        .reopen-snake-tab.hidden { display: none; }
        .reopen-snake-tab:hover { transform: translateY(50%) translateX(5px); }
        .secret-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); display: none; align-items: center; justify-content: center; z-index: 10000; animation: fadeIn 0.5s ease; }
        .secret-modal.active { display: flex; }
        .secret-content { background: linear-gradient(135deg, #1A1510 0%, #2D1810 100%); padding: 40px; border-radius: 20px; border: 3px solid #FF4500; text-align: center; max-width: 500px; box-shadow: 0 0 50px rgba(255, 69, 0, 0.5); animation: scaleIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleIn { from { transform: scale(0.7); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .promo-code { font-size: 2.5rem; font-family: 'Source Code Pro', monospace; color: #FF4500; background-color: #110E0B; padding: 20px; border-radius: 10px; margin: 20px 0; letter-spacing: 5px; border: 2px dashed #FF4500; }
    </style>
</head>
<body class="antialiased">

    <div id="reopenGameBtn" class="reopen-tab left-tab hidden">üçï</div>
    <div id="reopenHintBtn" class="reopen-tab right-tab hidden">üîç</div>
    <div id="reopenSnakeBtn" class="reopen-snake-tab hidden">üêç</div>

    <button class="snake-game-btn" id="openSnakeGame">
        üêç Play Volcano Snake<br>
        <span style="font-size: 0.75em; font-weight: 400;">While you wait!</span>
    </button>

    <div class="snake-popup" id="snakePopup">
        <button class="snake-close" id="closeSnakePopup">√ó</button>
        <div class="text-center">
            <p class="text-orange-500 font-bold text-xl mb-1 tech-font">üêç Volcano Snake üçï</p>
            <p class="text-sm text-gray-300 mb-2">Collect pizzas while you wait for your order!</p>
            <div class="text-center mb-2">
                <span class="text-orange-400 font-bold ticker-font text-base">Your Score: <span id="snake-score">0</span></span>
                <span class="text-gray-400 mx-2">|</span>
                <span class="text-green-400 font-bold ticker-font text-base">Your Best: <span id="snake-high-score">0</span></span>
            </div>
            <div class="text-center mb-2 bg-gradient-to-r from-yellow-600 to-orange-600 py-1 px-3 rounded-lg border-2 border-yellow-400">
                <span class="text-white font-bold ticker-font text-sm">üèÜ SITE RECORD: <span id="snake-global-high-score" class="text-yellow-200">0</span> üèÜ</span>
            </div>
            <canvas id="snake-canvas" width="360" height="360"></canvas>
            <div class="snake-controls">
                <div class="snake-control-grid">
                    <div></div>
                    <button class="snake-control-btn" id="snake-up">‚ñ≤</button>
                    <div></div>
                    <button class="snake-control-btn" id="snake-left">‚óÑ</button>
                    <button class="btn-primary font-bold py-2 px-4 rounded-lg text-sm" id="snake-restart" style="width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">‚ñ∂</button>
                    <button class="snake-control-btn" id="snake-right">‚ñ∫</button>
                    <div></div>
                    <button class="snake-control-btn" id="snake-down">‚ñº</button>
                    <div></div>
                </div>
            </div>
            <p class="text-xs text-gray-400 mt-3">Use arrow keys or buttons to move. Don't hit the walls or yourself!</p>
        </div>
    </div>

    <div class="social-float">
        <a href="https://www.facebook.com/VolcanoPizzeriaWelland" target="_blank" rel="noopener noreferrer" class="social-btn" title="Follow us on Facebook"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/></svg></a>
        <a href="https://x.com/VolcanoPizzeria" target="_blank" rel="noopener noreferrer" class="social-btn" title="Follow us on X (Twitter)"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
    </div>

    <div class="game-popup" id="gamePopup">
        <button class="game-close" id="closeGamePopup">√ó</button>
        <div class="text-center">
            <p class="text-orange-500 font-bold text-lg mb-1 tech-font">üåã Volcano Launch Challenge üçï</p>
            <p class="text-sm text-gray-300 px-2 mb-1">Launch pizza from our volcano! Complete all 5 increasingly difficult rounds to win a <span class="text-orange-400 font-bold">Large Pizza Combo!</span></p>
            <p class="text-xs text-orange-300 italic mb-2">You have 5 shots total. Use them wisely!</p>
            <div id="game-info">
                <span id="round-display">Round: 1/5</span>
                <span id="shots-display">Shots: 5</span>
            </div>
            <div id="game-area" class="my-2 rounded-lg game-inactive">
                <div id="game-over-overlay">
                    <h3 id="game-over-message">Game Over!</h3>
                    <p class="text-sm text-gray-300 mt-1" id="game-over-subtitle">Better luck next time!</p>
                </div>
                
                <div id="slingshot-base" class="bottom"></div>
                
                <div class="slingshot-band" id="tether"></div>
                
                <div id="pizza-projectile-wrapper">
                    <div id="pizza-projectile">üçï</div>
                </div>
                
                <div class="obstacle" id="obstacle-wall-1"></div>
                <div class="obstacle" id="obstacle-wall-2"></div>
                <div class="obstacle" id="obstacle-wall-3"></div>
                <div class="obstacle" id="obstacle-wall-4"></div>
                <div class="obstacle" id="obstacle-wall-5"></div>
                
                <div id="target"></div>
                
                <div id="countdown-timer">30</div>
            </div>
            <div id="game-message" class="text-orange-400 font-semibold mb-2"></div>
            <button id="startGameBtn" class="btn-primary font-bold py-2 px-5 rounded-lg tech-font text-sm">START</button>
        </div>
    </div>

    <div class="hint-popup" id="hintPopup">
        <button class="hint-close" id="closeHint">√ó</button>
        <div class="text-center">
            <p class="text-orange-500 font-bold text-lg mb-2 tech-font">üîç SECRET ALERT! üîç</p>
            <p class="text-gray-300 text-sm mb-3">There's a <span class="text-orange-400 font-bold">hidden button</span> somewhere on this page...</p>
            <p class="text-gray-300 text-sm mb-3">Find it and unlock a code for a <span class="text-orange-500 font-bold">FREE CAN OF POP</span>!</p>
            <p class="text-gray-400 text-xs italic">Good luck! üòâü•§</p>
        </div>
    </div>
    <div class="secret-modal" id="secretModal"> <div class="secret-content"> <h2 class="text-4xl font-bold text-orange-500 mb-4 tech-font">ü•§ SECRET UNLOCKED! ü•§</h2> <p class="text-xl text-gray-300 mb-4">You found the hidden Easter egg!</p> <div class="promo-code">FREEPOP2025</div> <p class="text-lg text-gray-300 mb-6">Show this code when ordering to get a <span class="text-orange-500 font-bold">FREE CAN OF POP</span> with your order!</p> <p class="text-sm text-gray-400 mb-2">*Valid with minimum $20 order</p> <p class="text-sm text-gray-400 mb-4">*One per customer per visit. Cannot be combined with other offers.</p> <button id="closeModal" class="btn-primary font-bold py-3 px-8 rounded-lg tech-font">AWESOME!</button> </div> </div>
    <div class="secret-modal" id="fakeHintModal"> <div class="secret-content"> <h2 class="text-3xl font-bold text-orange-500 mb-4 tech-font">A Clue for the Curious...</h2> <p class="text-lg text-gray-300 mb-4">So close! You found *a* secret, but not the one with the prize.</p> <p class="text-gray-300 mb-6">The true secret lies hidden in our history. Look closely at the legacy photo in the <a href="#our-story" id="linkToStory" class="font-bold text-orange-400 hover:underline">"Our Story"</a> section. Some things are more than they appear...</p> <button id="closeFakeHint" class="btn-primary font-bold py-3 px-8 rounded-lg tech-font">GOT IT!</button> </div> </div>

    <header class="bg-[#1A1510]/80 backdrop-blur-sm sticky top-0 z-50 border-b border-[#4D3D2B]">
        <div class="container mx-auto px-4 sm:px-6 py-2 flex justify-between items-center gap-2 md:gap-4">
            <div class="flex items-center space-x-4 md:space-x-8 min-w-0">
                <a href="#" title="Volcano Pizza - Home" class="flex-shrink-0 hover:opacity-90 transition-opacity duration-300"><img src="./images/volcano-logo.png" alt="Volcano Pizza Logo" class="h-16 md:h-24 lg:h-28 w-auto drop-shadow-lg"></a>
                <nav class="hidden lg:flex space-x-6 font-semibold text-sm xl:text-base">
                    <a href="#our-story" class="text-gray-300 hover:text-orange-500 transition-colors duration-300">Our Story</a>
                    <a href="#specials" class="text-gray-300 hover:text-orange-500 transition-colors duration-300">Specials</a>
                    <a href="#menu" class="text-gray-300 hover:text-orange-500 transition-colors duration-300">Menu</a>
                    <a href="#contact" class="text-gray-300 hover:text-orange-500 transition-colors duration-300">Contact</a>
                </nav>
            </div>
            <div class="flex items-center">
                <div class="hidden lg:flex items-center space-x-3 xl:space-x-4">
                    <div id="status-indicator" class="flex items-center space-x-2 text-xs xl:text-sm">
                        <div class="status-dot w-2.5 h-2.5 xl:w-3 xl:h-3 rounded-full bg-red-500"></div>
                        <span class="status-text font-semibold text-red-400 whitespace-nowrap">We're Closed</span>
                    </div>
                    <a href="tel:905-735-3716" class="btn-primary font-bold py-2 px-4 xl:px-6 rounded-lg tech-font text-xs xl:text-sm text-center leading-tight">
                        <span class="text-[10px] xl:text-xs font-normal">Order Now!</span>
                        <span class="block">905-735-3716</span>
                    </a>
                </div>
                <button id="mobile-menu-button" class="lg:hidden ml-2 sm:ml-4 text-gray-300 hover:text-orange-500 focus:outline-none" aria-label="Open menu"><svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden lg:hidden px-4 sm:px-6 pb-4 border-t border-[#4D3D2B]">
            <a href="#our-story" class="block py-2 text-gray-300 hover:text-orange-500">Our Story</a>
            <a href="#specials" class="block py-2 text-gray-300 hover:text-orange-500">Specials</a>
            <a href="#menu" class="block py-2 text-gray-300 hover:text-orange-500">Menu</a>
            <a href="#contact" class="block py-2 text-gray-300 hover:text-orange-500">Contact</a>
            <div id="status-indicator-mobile" class="flex items-center space-x-2 text-sm mt-4">
                <div class="status-dot w-3 h-3 rounded-full bg-red-500"></div>
                <span class="status-text font-semibold text-red-400">We're Closed</span>
            </div>
            <a href="tel:905-735-3716" class="btn-primary font-bold py-2 px-6 rounded-lg mt-4 text-center block tech-font leading-tight">
                <span class="text-xs font-normal">Order Now!</span>
                <span class="block">905-735-3716</span>
            </a>
        </div>
    </header>

    <main>
        <section class="hero-bg text-white text-center">
            <div class="container mx-auto px-4 sm:px-6 z-10">
                <h1 class="text-4xl sm:text-5xl md:text-7xl font-black text-orange-500 mb-4 drop-shadow-lg tech-font leading-tight">VOLCANO PIZZA</h1>
                <p class="text-lg sm:text-xl md:text-2xl text-gray-200 mb-8 max-w-3xl mx-auto">Welland's landmark pizzeria, crafting the perfect slice with passion since 1970.</p>
                <a href="#menu" class="btn-primary font-bold py-3 px-8 text-lg tech-font rounded-lg">EXPLORE MENU</a>
            </div>
        </section>
        <section id="our-story" class="py-20 md:py-28">
            <div class="container mx-auto px-4 sm:px-6 reveal">
                <div class="text-center mb-12 md:mb-16">
                    <h2 class="section-title text-3xl sm:text-4xl md:text-5xl font-bold text-white">OUR STORY: THE VOLCANO LEGACY</h2>
                    <p class="section-subtitle mt-2 text-base sm:text-lg">You've tried the rest. Now taste the best.</p>
                </div>
                <div class="grid md:grid-cols-2 gap-12 md:gap-16 items-center">
                    <div class="rounded-lg overflow-hidden shadow-2xl relative">
                        <div class="secret-button" id="secretButton" title="ü§´"></div>
                        <img src="./images/OLD-PIZZA.png" alt="Volcano Pizzeria Legacy" class="w-full h-full object-cover rounded-lg border-2 border-orange-500/30">
                    </div>
                    <div class="story-flip-container" id="storyFlipContainer">
                        <div class="story-flip-inner">
                            <div class="story-flip-front">
                                <div class="border-l-4 border-orange-500 pl-6 md:pl-8 space-y-4 text-gray-300 text-base md:text-lg">
                                    <p>Volcano Pizza has been dedicated to delivering the highest quality pizza in Welland for over 40 years. Our business has been serving the community since the 1970s, and making superior quality pizza is the foundation of our success.</p>
                                    <p>Our secret recipe dough and sauces are made fresh daily, and we use only the highest quality ingredients to ensure our customers are completely satisfied. Whether tonight is Pizza & Wings, Focaccia, or our Tasty Subs, we have what you're looking for!</p>
                                </div>
                            </div>
                            <div class="story-flip-back">
                                <h3 class="text-3xl font-bold text-orange-500 mb-4 tech-font">ü•§ YOU FOUND IT! ü•§</h3>
                                <p class="text-xl text-gray-300 mb-4">Secret Code Unlocked!</p>
                                <div class="promo-code" style="font-size: 2rem; letter-spacing: 4px;">FREEPOP2025</div>
                                <p class="text-base text-gray-300 mb-4">Show this code for a <span class="font-bold">FREE CAN OF POP</span>!</p>
                                <p class="text-xs text-gray-400">*Valid with minimum $20 order. One per customer per visit.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="specials" class="py-20 md:py-28 falling-food-bg">
            <div class="container mx-auto px-4 sm:px-6 reveal relative z-10">
                <div class="text-center mb-12 md:mb-16">
                    <h2 class="section-title text-3xl sm:text-4xl md:text-5xl font-bold text-white">CHEF'S SELECTIONS</h2>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="card flex flex-col"><img src="./images/pizza-and-wings.jpg" alt="Pizza and Wings" class="w-full h-56 object-cover"><div class="p-5 flex flex-col flex-grow"><h3 class="text-xl font-bold text-white text-center mb-2">Pizza & Wings Combo</h3><p class="text-gray-400 text-center text-sm flex-grow">Small Pizza (3 toppings) & 10 wings.</p></div></div>
                    <div class="card flex flex-col"><img src="./images/Mozzarellasticks.jpg" alt="Mozzarella Sticks" class="w-full h-56 object-cover"><div class="p-5 flex flex-col flex-grow"><h3 class="text-xl font-bold text-white text-center mb-2">Mozzarella Sticks</h3><p class="text-gray-400 text-center text-sm flex-grow">Served with our signature marinara sauce.</p></div></div>
                    <div class="card flex flex-col"><img src="./images/JalapenoPoppers.jpg" alt="Jalapeno Poppers" class="w-full h-56 object-cover"><div class="p-5 flex flex-col flex-grow"><h3 class="text-xl font-bold text-white text-center mb-2">Jalape√±o Poppers</h3><p class="text-gray-400 text-center text-sm flex-grow">Cream cheese filled, lightly breaded & fried.</p></div></div>
                    <div class="card flex flex-col"><img src="./images/createyourown.png" alt="Create your own pizza" class="w-full h-56 object-cover"><div class="p-5 flex flex-col flex-grow"><h3 class="text-xl font-bold text-white text-center mb-2">Create Your Own</h3><p class="text-gray-400 text-center text-sm flex-grow">Craft your perfect meal with our chefs.</p></div></div>
                </div>
            </div>
        </section>
        <section id="menu" class="py-20 md:py-28">
            <div class="container mx-auto px-4 sm:px-6 reveal">
                <div class="text-center mb-12 md:mb-16"><h2 class="section-title text-3xl sm:text-4xl md:text-5xl font-bold text-white">OUR MENU</h2><p class="section-subtitle mt-2 text-base sm:text-lg">Fresh dough, secret sauce, and premium ingredients.</p></div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-12">
                     <div class="space-y-4"><h3 class="text-2xl font-bold text-white border-b-2 border-orange-500 pb-2 mb-4">Pizza - Cheese & Pepperoni</h3><div class="flex justify-between"><p>Small</p><p class="ticker-font font-bold text-orange-400">$11.49</p></div><div class="flex justify-between"><p>Large</p><p class="ticker-font font-bold text-orange-400">$14.99</p></div><div class="flex justify-between"><p>X Large</p><p class="ticker-font font-bold text-orange-400">$18.59</p></div><div class="flex justify-between"><p>Party Tray</p><p class="ticker-font font-bold text-orange-400">$24.79</p></div><div class="pt-3"><p class="text-gray-300 text-sm font-semibold mb-2">Toppings</p><div class="text-xs text-gray-400 flex flex-wrap gap-2"><span class="topping">Mushrooms</span><span class="topping">Sweet Peppers</span><span class="topping">Hot Peppers</span><span class="topping">Green Peppers</span><span class="topping">Onions</span><span class="topping">Olives</span><span class="topping">Bacon</span><span class="topping">Anchovies</span><span class="topping">Pineapple</span><span class="topping">Sausage</span><span class="topping">Ham</span><span class="topping">Tomato</span><span class="topping">Feta <span class="font-bold text-orange-400">(x2)</span></span></div><p class="text-gray-500 text-[11px] mt-2">*Feta = double topping.</p></div></div>
                     <div class="space-y-4"><h3 class="text-2xl font-bold text-white border-b-2 border-orange-500 pb-2 mb-4">Wings</h3><div class="flex justify-between"><p>10 Wings</p><p class="ticker-font font-bold text-orange-400">$11.99</p></div><div class="flex justify-between"><p>20 Wings</p><p class="ticker-font font-bold text-orange-400">$22.99</p></div><div class="flex justify-between"><p>30 Wings</p><p class="ticker-font font-bold text-orange-400">$32.99</p></div><div class="pt-3"><p class="text-gray-300 text-sm font-semibold mb-2">Flavors</p><div class="text-xs text-gray-400 flex flex-wrap gap-2"><span class="topping">Mild</span><span class="topping">Medium</span><span class="topping">Hot</span><span class="topping">Suicide</span><span class="topping">Honey Hot</span><span class="topping">Honey Garlic</span><span class="topping">Cajun</span></div></div></div>
                     <div class="space-y-4"><h3 class="text-2xl font-bold text-white border-b-2 border-orange-500 pb-2 mb-4">Subs</h3><div><p class="font-semibold text-white">Cold Subs</p><p class="text-gray-400 text-sm">Ham, Salami, Capicola, Deluxe w/ Cheese, Lettuce, Tomato, Dressing.</p></div><div class="flex justify-between pt-2"><p>Pizza Sub</p><p class="ticker-font font-bold text-orange-400">$9.99</p></div><div class="flex justify-between"><p>Meatball Sub</p><p class="ticker-font font-bold text-orange-400">$9.99</p></div><div class="flex justify-between"><p>Hot Sausage Sub</p><p class="ticker-font font-bold text-orange-400">$9.99</p></div></div>
                     <div class="space-y-4"><h3 class="text-2xl font-bold text-white border-b-2 border-orange-500 pb-2 mb-4">Sides & Extras</h3><div class="flex justify-between"><p>Dipping Sauces</p><p class="ticker-font font-bold text-orange-400">$1.29</p></div><div class="flex justify-between"><p>Garlic Bread</p><p class="ticker-font font-bold text-orange-400">$5.49</p></div><div class="flex justify-between"><p>Jalape√±o Poppers (6)</p><p class="ticker-font font-bold text-orange-400">$7.99</p></div><div class="flex justify-between"><p>Mozzarella Sticks (6)</p><p class="ticker-font font-bold text-orange-400">$7.99</p></div><div class="pt-3"><p class="text-gray-300 text-sm font-semibold mb-2">Sauces</p><div class="text-xs text-gray-400 flex flex-wrap gap-2"><span class="topping">Garlic</span><span class="topping">Ranch</span><span class="topping">Cheddar</span><span class="topping">Blue Cheese</span></div></div></div>
                </div>
                <div class="mt-16 md:mt-20"><h3 class="text-3xl font-bold text-white text-center mb-8 border-b-2 border-orange-500 pb-4">Volcano Pizza Combos</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6 text-gray-200"><div class="combo"><h4>XL Pizza (3) + 20 Wings</h4><p>$41.59</p></div><div class="combo"><h4>L Pizza (3) + 20 Wings</h4><p>$38.99</p></div><div class="combo popular"><h4>Sm Pizza (3) + 10 Wings</h4><p>$24.79</p></div><div class="combo"><h4>2 Lrg Cheese & Pep</h4><p>$27.49</p></div><div class="combo"><h4>Party Tray (2) + 25 Wings</h4><p>$49.49</p></div><div class="combo"><h4>Party Tray (2) + 40 Wings</h4><p>$61.99</p></div></div></div>
                <div class="mt-12 text-center text-gray-500 text-sm space-y-2"><p>*Prices Subject to Change. Call for delivery info.</p><p>*All prices subject to taxes.</p></div>
            </div>
        </section>
        <section id="contact" class="py-20 md:py-28 bg-[#0A0704]">
            <div class="container mx-auto px-4 sm:px-6 text-center reveal">
                <div class="text-center mb-12 md:mb-16"><h2 class="section-title text-3xl sm:text-4xl md:text-5xl font-bold text-white">VISIT & CONTACT US</h2><p class="section-subtitle mt-2 text-base sm:text-lg">Stop by or call to order.</p></div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div class="rounded-lg overflow-hidden h-96 border border-orange-500/30"><iframe width="100%" height="100%" frameborder="0" scrolling="no" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2922.339249089158!2d-79.245826484526!3d42.98661997914987!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89d349a423531a7b%3A0x6b5a3178233f40b3!2sVolcano%20Pizzeria!5e0!3m2!1sen!2sca!4v1672866635928!5m2!1sen!2sca" style="filter: grayscale(1) invert(0.9) contrast(0.9) hue-rotate(30deg);" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe></div>
                    <div class="text-center md:text-left">
                        <h3 class="text-3xl font-bold text-white mb-4">Location & Hours</h3><p class="text-lg text-gray-300 mb-4"><a href="https://goo.gl/maps/c6j1xScv2m3oGZtW7" target="_blank" class="hover:text-orange-500">256 E Main St, Welland, ON L3B 3W9</a></p>
                        <p class="text-lg text-gray-300 mb-6"><span class="font-bold">Phone:</span> <a href="tel:905-735-3716" class="hover:text-orange-500">905-735-3716</a></p>
                        <h4 class="text-2xl font-bold text-white mb-3">Operating Hours</h4>
                        <ul class="text-gray-400 space-y-1 text-lg">
                            <li>Mon: <span class="pl-3 font-semibold text-gray-300">12 PM - 9 PM</span></li><li>Tue: <span class="pl-2 font-semibold text-gray-300">12 PM - 9 PM</span></li><li>Wed: <span class="font-semibold text-gray-300">12 PM - 9 PM</span></li><li>Thu: <span class="pl-1 font-semibold text-gray-300">12 PM - 9 PM</span></li><li>Fri: <span class="pl-5 font-semibold text-gray-300">11 AM - 10 PM</span></li><li>Sat: <span class="pl-2 font-semibold text-gray-300">11 AM - 10 PM</span></li><li>Sun: <span class="pl-4 font-semibold text-gray-300">12 PM - 9 PM</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-black py-8 border-t border-gray-800">
        <div class="container mx-auto px-4 sm:px-6 text-center text-gray-500">
            <p class="text-lg tech-font text-white mb-2">VOLCANO PIZZA</p>
            <p>¬© 2025 Volcano Pizza. All Rights Reserved<span id="fakeSecretButton" class="cursor-pointer text-gray-600 hover:text-orange-500 transition-colors duration-300">.</span></p>
        </div>
    </footer>

    <script>
        // --- ALL SITE UI AND NON-GAME LOGIC ---
        document.addEventListener('DOMContentLoaded', function() {
            const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } }); }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            document.querySelectorAll('.grid .topping').forEach(el => el.classList.add('px-2', 'py-1', 'rounded-full', 'bg-[#1E1914]', 'border', 'border-orange-500/30'));
            document.querySelectorAll('.combo').forEach(el => { el.classList.add('flex', 'justify-between', 'items-baseline'); if (el.classList.contains('popular')) { const h4 = el.querySelector('h4'); h4.insertAdjacentHTML('afterend', '<div class="flex items-center gap-3"><span class="bg-orange-500 text-[#110E0B] text-xs font-bold px-2 py-0.5 rounded-full uppercase tracking-wider">Popular</span>'); el.querySelector('p').parentElement.append(el.querySelector('p')); el.querySelector('p').previousElementSibling.remove(); } });
            document.querySelectorAll('.combo p').forEach(el => el.classList.add('text-lg', 'font-bold', 'text-orange-400', 'ticker-font'));
            document.querySelectorAll('.combo h4').forEach(el => el.classList.add('text-lg'));
            
            const businessHours = [{open:12,close:21},{open:12,close:21},{open:12,close:21},{open:12,close:21},{open:11,close:22},{open:11,close:22},{open:12,close:21}]; // Sunday is 0, but your list starts Mon. Corrected to Sun-Sat.
            function checkOpenStatus() { const now = new Date(new Date().toLocaleString("en-US", {timeZone:"America/Toronto"})); const dayOfWeek = now.getDay(); const todaysHours = businessHours[dayOfWeek]; let status = 'closed'; if (todaysHours) { const currentTime = now.getHours() + now.getMinutes() / 60; if (currentTime >= todaysHours.open && currentTime < todaysHours.close) { status = (todaysHours.close - currentTime <= 0.5) ? 'closing_soon' : 'open'; } } document.querySelectorAll('#status-indicator, #status-indicator-mobile').forEach(indicator => { const dot = indicator.querySelector('.status-dot'); const text = indicator.querySelector('.status-text'); dot.className = 'status-dot w-2.5 h-2.5 xl:w-3 xl:h-3 rounded-full'; text.className = 'status-text font-semibold whitespace-nowrap'; if (status === 'open') { dot.classList.add('bg-green-500'); text.classList.add('text-green-400'); text.textContent = "We're Open!"; } else if (status === 'closing_soon') { dot.classList.add('bg-yellow-500', 'animate-pulse'); text.classList.add('text-yellow-400'); text.textContent = "Closing Soon!"; } else { dot.classList.add('bg-red-500'); text.classList.add('text-red-400'); text.textContent = "We're Closed"; } }); }
            checkOpenStatus(); setInterval(checkOpenStatus, 60000);
            
            const mobileMenuButton = document.getElementById('mobile-menu-button'); const mobileMenu = document.getElementById('mobile-menu');
            if(mobileMenuButton && mobileMenu) { mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden')); mobileMenu.querySelectorAll('a').forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('hidden'))); }
            
            const hintPopup = document.getElementById('hintPopup');
            const closeHintBtn = document.getElementById('closeHint');
            const reopenHintBtn = document.getElementById('reopenHintBtn');
            
            if (localStorage.getItem('hintClosed')) {
                reopenHintBtn.classList.remove('hidden');
            }
            setTimeout(() => { if (!localStorage.getItem('hintClosed')) hintPopup.classList.add('show'); }, 10000);

            if(closeHintBtn && reopenHintBtn) {
                closeHintBtn.addEventListener('click', () => { 
                    hintPopup.classList.remove('show'); 
                    reopenHintBtn.classList.remove('hidden');
                    localStorage.setItem('hintClosed', 'true'); 
                });
            }
            if(reopenHintBtn) {
                reopenHintBtn.addEventListener('click', () => {
                    hintPopup.classList.add('show');
                    reopenHintBtn.classList.add('hidden');
                });
            }

            const storyFlip = document.getElementById('storyFlipContainer'); 
            if(storyFlip) {
                storyFlip.addEventListener('dblclick', function() { 
                    this.classList.toggle('flipped'); 
                    if(hintPopup.classList.contains('show')) {
                        hintPopup.classList.remove('show');
                        reopenHintBtn.classList.remove('hidden');
                    }
                });
            }
            
            const specialsSection = document.getElementById('specials'); if(specialsSection){ const foodImages = ['./images/pizza-icon.png', './images/CHICKEN-ICON.png']; let fragment = document.createDocumentFragment(); for (let i = 0; i < 25; i++) { const item = document.createElement('div'); item.className = 'falling-item'; const img = document.createElement('img'); img.src = foodImages[i % 2]; img.alt = ''; img.loading = 'lazy'; item.appendChild(img); item.style.left = `${Math.random() * 100}%`; item.style.animationDuration = `${Math.random() * 10 + 8}s`; item.style.animationDelay = `${Math.random() * 8}s`; fragment.appendChild(item); } specialsSection.appendChild(fragment); }
            
            const secretButton = document.getElementById('secretButton'); 
            const secretModal = document.getElementById('secretModal');
            if(secretButton) { 
                secretButton.addEventListener('click', (e) => { 
                    e.stopPropagation(); 
                    
                    // Track usage to prevent abuse
                    const couponClickCount = parseInt(localStorage.getItem('couponClickCount') || '0');
                    localStorage.setItem('couponClickCount', couponClickCount + 1);
                    
                    secretButton.style.transform = 'scale(1.8)';
                    setTimeout(() => secretButton.style.transform = 'scale(1)', 150);
                    secretModal.classList.add('active'); 
                    if(hintPopup.classList.contains('show')) {
                        hintPopup.classList.remove('show');
                        reopenHintBtn.classList.remove('hidden');
                    }
                }); 
            }
            document.getElementById('closeModal').addEventListener('click', () => {
                secretModal.classList.remove('active');
                // Mark that they've viewed the coupon
                localStorage.setItem('freePopViewed', Date.now().toString());
            }); 
            secretModal.addEventListener('click', (e) => { if (e.target === secretModal) secretModal.classList.remove('active'); });
            
            const fakeHintModal = document.getElementById('fakeHintModal'); 
            document.getElementById('fakeSecretButton').addEventListener('click', () => fakeHintModal.classList.add('active'));
            document.getElementById('closeFakeHint').addEventListener('click', () => fakeHintModal.classList.remove('active')); 
            document.getElementById('linkToStory').addEventListener('click', () => fakeHintModal.classList.remove('active'));
            fakeHintModal.addEventListener('click', (e) => { if (e.target === fakeHintModal) fakeHintModal.classList.remove('active'); });
        });

        // --- PROFESSIONAL ANGRY BIRDS STYLE GAME LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const isTesting = false;

            const gamePopup = document.getElementById('gamePopup'), gameArea = document.getElementById('game-area'), pizzaWrapper = document.getElementById('pizza-projectile-wrapper'), pizza = document.getElementById('pizza-projectile'), target = document.getElementById('target'), obstacles = [document.getElementById('obstacle-wall-1'), document.getElementById('obstacle-wall-2'), document.getElementById('obstacle-wall-3'), document.getElementById('obstacle-wall-4'), document.getElementById('obstacle-wall-5')], tether = document.getElementById('tether'), startGameBtn = document.getElementById('startGameBtn'), closeGamePopup = document.getElementById('closeGamePopup'), gameMessage = document.getElementById('game-message'), shotsDisplay = document.getElementById('shots-display'), roundDisplay = document.getElementById('round-display'), gameOverOverlay = document.getElementById('game-over-overlay'), gameOverMessage = document.getElementById('game-over-message'), gameOverSubtitle = document.getElementById('game-over-subtitle'), reopenGameBtn = document.getElementById('reopenGameBtn'), slingshotBase = document.getElementById('slingshot-base'), countdownTimerDisplay = document.getElementById('countdown-timer');

            const totalRounds = 5, totalShots = 5;
            let shotsLeft = totalShots, currentRound = 1, isDragging = false, isAnimating = false, isGameActive = false, animationFrameId, pizzaX, pizzaY, velocityX, velocityY;
            let volcanoTipX, volcanoTipY, initialPizzaX, initialPizzaY;
            let countdownTimerId, countdownValue;
            const gravity = 0.25, launchPowerMultiplier = 0.25, maxDragDistance = 75, airResistance = 0.989, cooldownMillis = 864e5; // 24 hours

            function updateUI() {
                roundDisplay.textContent = `Round: ${currentRound > totalRounds ? totalRounds : currentRound}/${totalRounds}`;
                shotsDisplay.textContent = `Shots: ${shotsLeft}`;
            }

            function clearCountdown() {
                if (countdownTimerId) { clearInterval(countdownTimerId); countdownTimerId = null; }
                countdownTimerDisplay.style.display = 'none';
            }
            
            function setSlingshotPosition() {
                slingshotBase.classList.remove('top');
                slingshotBase.classList.add('bottom');

                const baseRect = slingshotBase.getBoundingClientRect();
                const gameRect = gameArea.getBoundingClientRect();
                
                // Calculate the volcano tip position (top center of the triangle)
                volcanoTipX = (baseRect.left - gameRect.left) + (baseRect.width / 2);
                volcanoTipY = (baseRect.top - gameRect.top);
                
                // Position the pizza right on top of the volcano tip
                initialPizzaX = volcanoTipX;
                initialPizzaY = volcanoTipY - 10;
            }

            function resetPizza() {
                clearCountdown();
                isAnimating = false;
                pizzaWrapper.style.opacity = '1';
                pizzaWrapper.style.cursor = 'grab';
                
                setSlingshotPosition();

                pizzaX = initialPizzaX;
                pizzaY = initialPizzaY;
                
                pizzaWrapper.style.transform = `translate(${pizzaX - pizzaWrapper.offsetWidth / 2}px, ${pizzaY - pizzaWrapper.offsetHeight / 2}px)`;
                pizza.style.transform = `rotate(0deg) scaleY(1)`;
                
                tether.style.display = 'none';
                pizzaWrapper.classList.remove('max-pull');
                
                if (shotsLeft <= 0 && isGameActive && !gameOverOverlay.classList.contains('show')) {
                    setTimeout(() => endGame(false), 500);
                }
            }
            
            function setupRound(round) {
                obstacles.forEach(obs => {
                    obs.style.display = 'none';
                    obs.classList.remove('with-gap');
                });
                target.style.display = 'block';
                
                const speeds = {
                    target: ['3s', '2.5s', '2.8s', '1.8s', '0.5s'],
                    obs1: ['3.5s', '2.8s', '3.2s', '2.2s', '0.8s'],
                    obs2: ['-', '3.2s', '2.8s', '2.5s', '0.9s'],
                    obs3: ['-', '-', '3.0s', '3.0s', '0.7s'],
                    obs4: ['-', '-', '-', '3.2s', '1.1s']
                };

                target.style.animationDuration = speeds.target[round-1];
                
                // Round 5: All 4 obstacles + obstacle 4 has a tiny gap
                if (round === 5) {
                    // Show all 4 obstacles
                    for(let i = 0; i < 4; i++) {
                        obstacles[i].style.display = 'block';
                        obstacles[i].style.animationDuration = speeds[`obs${i+1}`][round-1];
                    }
                    
                    // Add tiny gap to obstacle 4 (the one closest to target)
                    obstacles[3].classList.add('with-gap');
                    
                    // Make positioning tighter
                    obstacles[0].style.left = '170px';
                    obstacles[1].style.left = '125px';
                    obstacles[2].style.left = '80px';
                    obstacles[3].style.left = '35px';
                } else {
                    // Other rounds: show obstacles up to current round
                    for(let i = 0; i < round; i++) {
                        obstacles[i].style.display = 'block';
                        obstacles[i].style.animationDuration = speeds[`obs${i+1}`][round-1];
                    }
                    
                    // Reset positions for non-round-5
                    obstacles[0].style.left = '180px';
                    obstacles[1].style.left = '140px';
                    obstacles[2].style.left = '100px';
                    obstacles[3].style.left = '60px';
                }

                updateUI();
                resetPizza();
            }
            
            function aimSlingshot() {
                // Volcano stays stationary - no tracking
            }

            function startGame() {
                isGameActive = true;
                gameArea.classList.remove('game-inactive');
                shotsLeft = totalShots;
                currentRound = 1;
                gameOverOverlay.classList.remove('show');
                startGameBtn.style.display = 'none';
                setupRound(currentRound);
                if (animationFrameId) cancelAnimationFrame(animationFrameId);
                animationFrameId = requestAnimationFrame(gameLoop);
            }

            function endGame(isWin) {
                isGameActive = false;
                clearCountdown();
                gameArea.classList.add('game-inactive');
                if(animationFrameId) cancelAnimationFrame(animationFrameId);
                animationFrameId = null;

                if(isWin) {
                    gameOverMessage.textContent = "üéâ CHAMPION! üéâ";
                    gameOverSubtitle.innerHTML = "You mastered the volcano!<br>Show this screen for your <span class='text-orange-400 font-bold'>FREE Large Pizza Combo!</span>";
                } else {
                    gameOverMessage.textContent = "Keep Practicing!";
                    gameOverSubtitle.innerHTML = `Try again in 24 hours for another chance!<br>(<a href="tel:905-735-3716" class="text-orange-400 hover:underline">call to order now</a>)`;
                }

                gameOverOverlay.classList.add('show');
                if (!isTesting) {
                    if (isWin) {
                        localStorage.setItem('gameTokenUsed', 'true');
                    } else {
                        localStorage.setItem('pizzaGameLastPlayed', Date.now().toString());
                    }
                }
                checkGameAvailability();
            }

            function startCountdown() {
                clearCountdown();
                countdownValue = 30;
                countdownTimerDisplay.textContent = countdownValue;
                countdownTimerDisplay.style.display = 'block';

                countdownTimerId = setInterval(() => {
                    countdownValue--;
                    countdownTimerDisplay.textContent = countdownValue;
                    if (countdownValue <= 0) {
                        clearCountdown();
                        if (isDragging) {
                            isDragging = false;
                            pizzaWrapper.style.cursor = 'grab';
                            pizzaWrapper.classList.remove('max-pull');
                            gameMessage.textContent = "Time's up! Shot wasted.";
                            setTimeout(() => gameMessage.textContent = "", 2000);
                            shotsLeft--;
                            updateUI();
                            resetPizza();
                        }
                    }
                }, 1000);
            }

            function getEventCoords(e) { const rect = gameArea.getBoundingClientRect(); return { x: (e.clientX || e.touches[0].clientX) - rect.left, y: (e.clientY || e.touches[0].clientY) - rect.top }; }
            
            function onDragStart(e) {
                if (!isGameActive || isAnimating || shotsLeft <= 0 || gameOverOverlay.classList.contains('show')) return;
                const coords = getEventCoords(e);
                const pizzaRect = pizzaWrapper.getBoundingClientRect();
                const gameRect = gameArea.getBoundingClientRect();
                if (coords.x >= (pizzaRect.left - gameRect.left) && coords.x <= (pizzaRect.right - gameRect.left) && coords.y >= (pizzaRect.top - gameRect.top) && coords.y <= (pizzaRect.bottom - gameRect.top)) {
                    e.preventDefault(); 
                    isDragging = true; 
                    pizzaWrapper.style.cursor = 'grabbing'; 
                    tether.style.display = 'block'; 
                    startCountdown();
                }
            }
            
            function onDragMove(e) { 
                if (!isDragging) return; 
                e.preventDefault(); 
                const coords = getEventCoords(e); 
                let dx = coords.x - initialPizzaX;
                let dy = coords.y - initialPizzaY;
                
                // Allow pulling more to the right and down
                // Restrict pulling left (negative x) and up (negative y)
                if (dx < -20) dx = -20; // Limited pull to the left
                if (dy < -20) dy = -20; // Limited pull up
                if (dx > maxDragDistance * 1.5) dx = maxDragDistance * 1.5; // Extended pull right
                if (dy > maxDragDistance) dy = maxDragDistance; // Normal pull down
                
                let dist = Math.hypot(dx, dy); 
                if (dist > maxDragDistance) { 
                    pizzaWrapper.classList.add('max-pull'); 
                } else { 
                    pizzaWrapper.classList.remove('max-pull'); 
                } 
                
                pizzaX = initialPizzaX + dx; 
                pizzaY = initialPizzaY + dy; 
                pizzaWrapper.style.transform = `translate(${pizzaX - pizzaWrapper.offsetWidth / 2}px, ${pizzaY - pizzaWrapper.offsetHeight / 2}px)`; 
                updateTether(pizzaX, pizzaY); 
            }
            
            function updateTether(pX, pY) {
                // Calculate distance and angle from volcano tip to pizza
                const dx = pX - volcanoTipX;
                const dy = pY - volcanoTipY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                
                // Position and rotate tether from volcano tip to pizza
                tether.style.left = volcanoTipX + 'px';
                tether.style.top = volcanoTipY + 'px';
                tether.style.width = distance + 'px';
                tether.style.transform = `rotate(${angle}deg)`;
            }

            function onDragEnd() { 
                if (!isDragging) return; 
                clearCountdown();
                isDragging = false; 
                pizzaWrapper.style.cursor = 'grab'; 
                pizzaWrapper.classList.remove('max-pull'); 
                tether.style.display = 'none'; 
                velocityX = (initialPizzaX - pizzaX) * launchPowerMultiplier; 
                velocityY = (initialPizzaY - pizzaY) * launchPowerMultiplier; 
                isAnimating = true; 
                shotsLeft--; 
                updateUI(); 
            }
            
            function gameLoop() {
                if (!isGameActive) return;

                aimSlingshot();

                if (isAnimating) {
                    velocityY += gravity; velocityX *= airResistance; velocityY *= airResistance; pizzaX += velocityX; pizzaY += velocityY; 
                    const angle = Math.atan2(velocityY, velocityX) * 180 / Math.PI;
                    pizzaWrapper.style.transform = `translate(${pizzaX - pizzaWrapper.offsetWidth / 2}px, ${pizzaY - pizzaWrapper.offsetHeight / 2}px)`;
                    pizza.style.transform = `rotate(${angle + 90}deg) scaleY(1)`;
                    
                    const pizzaCenterX = pizzaX, pizzaCenterY = pizzaY, pizzaRadius = pizzaWrapper.offsetWidth / 2;
                    const gameRect = gameArea.getBoundingClientRect();

                    const activeObstacles = obstacles.filter(obs => obs.style.display !== 'none');
                    let hitObstacle = false;
                    for(const obs of activeObstacles) {
                        const obsRect = obs.getBoundingClientRect();
                        if (pizzaCenterX + pizzaRadius > obsRect.left - gameRect.left && pizzaCenterX - pizzaRadius < obsRect.right - gameRect.left && pizzaCenterY + pizzaRadius > obsRect.top - gameRect.top && pizzaCenterY - pizzaRadius < obsRect.bottom - gameRect.top) {
                            hitObstacle = true;
                            break;
                        }
                    }

                    if (hitObstacle) {
                        isAnimating = false;
                        velocityX = -velocityX * 0.3;
                        pizzaX += velocityX * 2;
                        pizzaWrapper.style.transform = `translate(${pizzaX - pizzaWrapper.offsetWidth / 2}px, ${pizzaY - pizzaWrapper.offsetHeight / 2}px)`;
                        setTimeout(resetPizza, 500);
                    } else {
                        const targetRect = target.getBoundingClientRect();
                        const targetCenterX = (targetRect.left - gameRect.left) + targetRect.width / 2;
                        const targetCenterY = (targetRect.top - gameRect.top) + targetRect.height / 2;
                        const distance = Math.hypot(pizzaCenterX - targetCenterX, pizzaCenterY - targetCenterY);

                        if (distance < (pizzaRadius + target.offsetWidth / 2)) {
                            isAnimating = false;
                            target.classList.add('hit-flash');
                            currentRound++;
                            if (currentRound > totalRounds) {
                                setTimeout(() => endGame(true), 500);
                            } else {
                                setTimeout(() => {
                                    target.classList.remove('hit-flash');
                                    setupRound(currentRound);
                                }, 1000);
                            }
                        }
                    }

                    if (isAnimating && (pizzaY > gameArea.offsetHeight + 100 || pizzaY < -100 || pizzaX < -100 || pizzaX > gameArea.offsetWidth + 100)) {
                        isAnimating = false;
                        setTimeout(resetPizza, 150);
                    }
                }
                animationFrameId = requestAnimationFrame(gameLoop);
            }

            function checkGameAvailability() {
                if (isTesting) { gameMessage.textContent = "üéÆ Testing Mode Active"; startGameBtn.disabled = false; startGameBtn.style.display = 'block'; startGameBtn.textContent = gameOverOverlay.classList.contains('show') ? 'PLAY AGAIN' : 'START GAME'; return; }
                
                let token = localStorage.getItem('gameToken');
                if (!token) {
                    token = `vp-token-${Date.now()}-${Math.random()}`;
                    localStorage.setItem('gameToken', token);
                }
                const tokenUsed = localStorage.getItem('gameTokenUsed') === 'true';

                if (tokenUsed) {
                    gameMessage.textContent = "üèÜ Prize already won on this device!";
                    startGameBtn.textContent = 'PRIZE CLAIMED';
                    startGameBtn.disabled = true;
                } else {
                    const lastPlayed = localStorage.getItem('pizzaGameLastPlayed');
                    if (lastPlayed) {
                        const timeSince = Date.now() - parseInt(lastPlayed, 10);
                        if (timeSince < cooldownMillis) {
                            const remaining = cooldownMillis - timeSince;
                            const h = Math.floor(remaining / 36e5);
                            const m = Math.floor((remaining % 36e5) / 6e4);
                            gameMessage.textContent = `‚è∞ Next attempt in ${h}h ${m}m`;
                            startGameBtn.textContent = 'COOLDOWN';
                            startGameBtn.disabled = true;
                        } else {
                            gameMessage.textContent = "üéØ Ready for your next attempt!";
                            startGameBtn.textContent = 'LAUNCH';
                            startGameBtn.disabled = false;
                        }
                    } else {
                        gameMessage.textContent = "üåã Master 5 rounds with 5 shots. Win big!";
                        startGameBtn.textContent = 'START GAME';
                        startGameBtn.disabled = false;
                    }
                }
                startGameBtn.style.display = 'block';
            }
            
            startGameBtn.addEventListener('click', startGame); 
            pizzaWrapper.addEventListener('mousedown', onDragStart); 
            document.addEventListener('mousemove', onDragMove); 
            document.addEventListener('mouseup', onDragEnd); 
            pizzaWrapper.addEventListener('touchstart', onDragStart, { passive: false }); 
            document.addEventListener('touchmove', onDragMove, { passive: false }); 
            document.addEventListener('touchend', onDragEnd);
            
            if (localStorage.getItem('gameClosed')) { reopenGameBtn.classList.remove('hidden'); }
            setTimeout(() => { if (gamePopup && !localStorage.getItem('gameClosed')) gamePopup.classList.add('show'); }, 8000);
            if(closeGamePopup) { closeGamePopup.addEventListener('click', () => { gamePopup.classList.remove('show'); reopenGameBtn.classList.remove('hidden'); localStorage.setItem('gameClosed', 'true'); }); }
            if(reopenGameBtn) { reopenGameBtn.addEventListener('click', () => { gamePopup.classList.add('show'); reopenGameBtn.classList.add('hidden'); }); }
            
            checkGameAvailability(); 
            updateUI(); 
            resetPizza();
        });

        // --- VOLCANO SNAKE GAME ---
        document.addEventListener('DOMContentLoaded', () => {
            const snakePopup = document.getElementById('snakePopup');
            const openSnakeBtn = document.getElementById('openSnakeGame');
            const closeSnakeBtn = document.getElementById('closeSnakePopup');
            const reopenSnakeBtn = document.getElementById('reopenSnakeBtn');
            const canvas = document.getElementById('snake-canvas');
            const ctx = canvas.getContext('2d');
            const scoreDisplay = document.getElementById('snake-score');
            const highScoreDisplay = document.getElementById('snake-high-score');
            const globalHighScoreDisplay = document.getElementById('snake-global-high-score');
            const restartBtn = document.getElementById('snake-restart');

            const gridSize = 20;
            const tileCount = canvas.width / gridSize;
            
            let snake = [{x: 10, y: 10}];
            let food = {x: 15, y: 15};
            let dx = 0, dy = 0;
            let score = 0;
            let highScore = localStorage.getItem('volcanoSnakeHighScore') || 0;
            let globalHighScore = localStorage.getItem('volcanoSnakeGlobalHighScore') || 0;
            let gameLoop = null;
            let gameSpeed = 100;
            let isGameActive = false;

            highScoreDisplay.textContent = highScore;
            globalHighScoreDisplay.textContent = globalHighScore;

            function startGame() {
                snake = [{x: 10, y: 10}];
                dx = 1;
                dy = 0;
                score = 0;
                gameSpeed = 100;
                scoreDisplay.textContent = score;
                placeFood();
                isGameActive = true;
                restartBtn.textContent = '‚è∏';
                if (gameLoop) clearInterval(gameLoop);
                gameLoop = setInterval(update, gameSpeed);
            }

            function pauseGame() {
                if (isGameActive) {
                    clearInterval(gameLoop);
                    gameLoop = null;
                    isGameActive = false;
                    restartBtn.textContent = '‚ñ∂';
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = '#FF4500';
                    ctx.font = 'bold 30px "Exo 2"';
                    ctx.textAlign = 'center';
                    ctx.fillText('PAUSED', canvas.width / 2, canvas.height / 2);
                } else {
                    isGameActive = true;
                    restartBtn.textContent = '‚è∏';
                    gameLoop = setInterval(update, gameSpeed);
                }
            }

            function placeFood() {
                food.x = Math.floor(Math.random() * tileCount);
                food.y = Math.floor(Math.random() * tileCount);
                
                // Make sure food doesn't spawn on snake
                for (let segment of snake) {
                    if (segment.x === food.x && segment.y === food.y) {
                        placeFood();
                        return;
                    }
                }
            }

            function update() {
                if (!isGameActive) return;

                // Move snake
                const head = {x: snake[0].x + dx, y: snake[0].y + dy};

                // Check wall collision
                if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                    gameOver();
                    return;
                }

                // Check self collision
                for (let segment of snake) {
                    if (segment.x === head.x && segment.y === head.y) {
                        gameOver();
                        return;
                    }
                }

                snake.unshift(head);

                // Check food collision
                if (head.x === food.x && head.y === food.y) {
                    score++;
                    scoreDisplay.textContent = score;
                    placeFood();
                    
                    // Increase speed slightly
                    if (score % 5 === 0 && gameSpeed > 50) {
                        gameSpeed -= 5;
                        clearInterval(gameLoop);
                        gameLoop = setInterval(update, gameSpeed);
                    }
                } else {
                    snake.pop();
                }

                draw();
            }

            function draw() {
                // Background
                ctx.fillStyle = '#1A1510';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Grid
                ctx.strokeStyle = '#2D1810';
                ctx.lineWidth = 1;
                for (let i = 0; i <= tileCount; i++) {
                    ctx.beginPath();
                    ctx.moveTo(i * gridSize, 0);
                    ctx.lineTo(i * gridSize, canvas.height);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(0, i * gridSize);
                    ctx.lineTo(canvas.width, i * gridSize);
                    ctx.stroke();
                }

                // Snake
                snake.forEach((segment, index) => {
                    if (index === 0) {
                        // Head
                        ctx.fillStyle = '#FF4500';
                        ctx.shadowBlur = 10;
                        ctx.shadowColor = '#FF4500';
                    } else {
                        // Body
                        const opacity = 1 - (index / snake.length) * 0.5;
                        ctx.fillStyle = `rgba(255, 99, 71, ${opacity})`;
                        ctx.shadowBlur = 5;
                    }
                    ctx.fillRect(segment.x * gridSize + 1, segment.y * gridSize + 1, gridSize - 2, gridSize - 2);
                    ctx.shadowBlur = 0;
                });

                // Food (Pizza emoji)
                ctx.font = `${gridSize - 4}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('üçï', food.x * gridSize + gridSize / 2, food.y * gridSize + gridSize / 2);
            }

            function gameOver() {
                isGameActive = false;
                clearInterval(gameLoop);
                gameLoop = null;
                restartBtn.textContent = '‚ñ∂';

                let isPersonalBest = false;
                let isGlobalRecord = false;

                // Update personal high score
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('volcanoSnakeHighScore', highScore);
                    highScoreDisplay.textContent = highScore;
                    isPersonalBest = true;
                }

                // Update global high score
                if (score > globalHighScore) {
                    globalHighScore = score;
                    localStorage.setItem('volcanoSnakeGlobalHighScore', globalHighScore);
                    globalHighScoreDisplay.textContent = globalHighScore;
                    isGlobalRecord = true;
                }

                // Massive game over screen that fits in panel
                ctx.fillStyle = 'rgba(0, 0, 0, 0.95)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Main "GAME OVER" text
                ctx.fillStyle = '#FF4500';
                ctx.font = 'bold 36px "Exo 2"';
                ctx.textAlign = 'center';
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#FF4500';
                ctx.fillText('GAME OVER!', canvas.width / 2, 60);
                ctx.shadowBlur = 0;
                
                // Your score
                ctx.fillStyle = '#FFD700';
                ctx.font = 'bold 20px "Exo 2"';
                ctx.fillText('Your Score', canvas.width / 2, 100);
                ctx.fillStyle = '#FFFFFF';
                ctx.font = 'bold 50px "Exo 2"';
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#FFD700';
                ctx.fillText(score, canvas.width / 2, 150);
                ctx.shadowBlur = 0;
                
                // Your personal best
                ctx.fillStyle = '#00CED1';
                ctx.font = 'bold 18px "Exo 2"';
                ctx.fillText('Your Best: ' + highScore, canvas.width / 2, 185);
                
                // Divider line
                ctx.strokeStyle = '#FF4500';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(50, 200);
                ctx.lineTo(310, 200);
                ctx.stroke();
                
                // SITE RECORD - MASSIVE
                ctx.fillStyle = '#FFD700';
                ctx.font = 'bold 22px "Exo 2"';
                ctx.fillText('üèÜ SITE RECORD üèÜ', canvas.width / 2, 230);
                
                // Giant global high score number
                ctx.fillStyle = '#00FF00';
                ctx.font = 'bold 70px "Exo 2"';
                ctx.shadowBlur = 25;
                ctx.shadowColor = '#00FF00';
                ctx.fillText(globalHighScore, canvas.width / 2, 295);
                ctx.shadowBlur = 0;
                
                // Challenge message
                if (isGlobalRecord) {
                    ctx.fillStyle = '#FFD700';
                    ctx.font = 'bold 20px "Exo 2"';
                    ctx.shadowBlur = 15;
                    ctx.shadowColor = '#FFD700';
                    ctx.fillText('üéâ NEW SITE RECORD! üéâ', canvas.width / 2, 340);
                    ctx.shadowBlur = 0;
                } else if (isPersonalBest) {
                    ctx.fillStyle = '#00CED1';
                    ctx.font = 'bold 18px "Exo 2"';
                    ctx.fillText('‚ú® Personal Best! ‚ú®', canvas.width / 2, 330);
                    ctx.fillStyle = '#FF4500';
                    ctx.font = 'bold 16px "Exo 2"';
                    ctx.fillText('Can you beat the record?', canvas.width / 2, 350);
                } else {
                    ctx.fillStyle = '#FF4500';
                    ctx.font = 'bold 18px "Exo 2"';
                    ctx.fillText('CAN YOU BEAT IT?!', canvas.width / 2, 340);
                }
            }

            function changeDirection(newDx, newDy) {
                // Prevent reversing
                if ((dx === 1 && newDx === -1) || (dx === -1 && newDx === 1)) return;
                if ((dy === 1 && newDy === -1) || (dy === -1 && newDy === 1)) return;
                dx = newDx;
                dy = newDy;
            }

            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                if (!snakePopup.classList.contains('show')) return;
                
                switch(e.key) {
                    case 'ArrowUp':
                    case 'w':
                    case 'W':
                        e.preventDefault();
                        changeDirection(0, -1);
                        break;
                    case 'ArrowDown':
                    case 's':
                    case 'S':
                        e.preventDefault();
                        changeDirection(0, 1);
                        break;
                    case 'ArrowLeft':
                    case 'a':
                    case 'A':
                        e.preventDefault();
                        changeDirection(-1, 0);
                        break;
                    case 'ArrowRight':
                    case 'd':
                    case 'D':
                        e.preventDefault();
                        changeDirection(1, 0);
                        break;
                    case ' ':
                        e.preventDefault();
                        pauseGame();
                        break;
                }
            });

            // Touch/Click controls
            document.getElementById('snake-up').addEventListener('click', () => changeDirection(0, -1));
            document.getElementById('snake-down').addEventListener('click', () => changeDirection(0, 1));
            document.getElementById('snake-left').addEventListener('click', () => changeDirection(-1, 0));
            document.getElementById('snake-right').addEventListener('click', () => changeDirection(1, 0));
            
            restartBtn.addEventListener('click', () => {
                if (!isGameActive || gameLoop === null) {
                    startGame();
                } else {
                    pauseGame();
                }
            });

            // Open/Close controls
            if (localStorage.getItem('snakeClosed')) {
                reopenSnakeBtn.classList.remove('hidden');
            }

            openSnakeBtn.addEventListener('click', () => {
                snakePopup.classList.add('show');
                openSnakeBtn.style.display = 'none';
                if (!isGameActive && snake.length === 1) {
                    draw(); // Draw initial state
                }
            });

            closeSnakeBtn.addEventListener('click', () => {
                snakePopup.classList.remove('show');
                reopenSnakeBtn.classList.remove('hidden');
                openSnakeBtn.style.display = 'block';
                localStorage.setItem('snakeClosed', 'true');
                if (gameLoop) {
                    clearInterval(gameLoop);
                    gameLoop = null;
                    isGameActive = false;
                }
            });

            reopenSnakeBtn.addEventListener('click', () => {
                snakePopup.classList.add('show');
                reopenSnakeBtn.classList.add('hidden');
                openSnakeBtn.style.display = 'none';
            });

            // Draw initial state
            draw();
        });
    </script>
</body>
</html>